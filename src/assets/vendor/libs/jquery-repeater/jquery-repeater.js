/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else {
		var a = factory();
		for(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];
	}
})(self, function() {
return /******/ (function() { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./libs/jquery-repeater/jquery-repeater.js":
/*!*************************************************!*\
  !*** ./libs/jquery-repeater/jquery-repeater.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   repeater: function() { return /* reexport module object */ jquery_repeater_jquery_repeater__WEBPACK_IMPORTED_MODULE_0__; }\n/* harmony export */ });\n/* harmony import */ var jquery_repeater_jquery_repeater__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery.repeater/jquery.repeater */ \"./node_modules/jquery.repeater/jquery.repeater.js\");\n/* harmony import */ var jquery_repeater_jquery_repeater__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery_repeater_jquery_repeater__WEBPACK_IMPORTED_MODULE_0__);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWJzL2pxdWVyeS1yZXBlYXRlci9qcXVlcnktcmVwZWF0ZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTREIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vTWF0ZXJpby8uL2xpYnMvanF1ZXJ5LXJlcGVhdGVyL2pxdWVyeS1yZXBlYXRlci5qcz9lYjI4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHJlcGVhdGVyIGZyb20gJ2pxdWVyeS5yZXBlYXRlci9qcXVlcnkucmVwZWF0ZXInO1xuXG5leHBvcnQgeyByZXBlYXRlciB9O1xuIl0sIm5hbWVzIjpbInJlcGVhdGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./libs/jquery-repeater/jquery-repeater.js\n");

/***/ }),

/***/ "./node_modules/jquery.repeater/jquery.repeater.js":
/*!*********************************************************!*\
  !*** ./node_modules/jquery.repeater/jquery.repeater.js ***!
  \*********************************************************/
/***/ (function() {

eval("// jquery.repeater version 1.2.1\n// https://github.com/DubFriend/jquery.repeater\n// (MIT) 09-10-2016\n// Brian Detering <BDeterin@gmail.com> (http://www.briandetering.net/)\n(function ($) {\n'use strict';\n\nvar identity = function (x) {\n    return x;\n};\n\nvar isArray = function (value) {\n    return $.isArray(value);\n};\n\nvar isObject = function (value) {\n    return !isArray(value) && (value instanceof Object);\n};\n\nvar isNumber = function (value) {\n    return value instanceof Number;\n};\n\nvar isFunction = function (value) {\n    return value instanceof Function;\n};\n\nvar indexOf = function (object, value) {\n    return $.inArray(value, object);\n};\n\nvar inArray = function (array, value) {\n    return indexOf(array, value) !== -1;\n};\n\nvar foreach = function (collection, callback) {\n    for(var i in collection) {\n        if(collection.hasOwnProperty(i)) {\n            callback(collection[i], i, collection);\n        }\n    }\n};\n\n\nvar last = function (array) {\n    return array[array.length - 1];\n};\n\nvar argumentsToArray = function (args) {\n    return Array.prototype.slice.call(args);\n};\n\nvar extend = function () {\n    var extended = {};\n    foreach(argumentsToArray(arguments), function (o) {\n        foreach(o, function (val, key) {\n            extended[key] = val;\n        });\n    });\n    return extended;\n};\n\nvar mapToArray = function (collection, callback) {\n    var mapped = [];\n    foreach(collection, function (value, key, coll) {\n        mapped.push(callback(value, key, coll));\n    });\n    return mapped;\n};\n\nvar mapToObject = function (collection, callback, keyCallback) {\n    var mapped = {};\n    foreach(collection, function (value, key, coll) {\n        key = keyCallback ? keyCallback(key, value) : key;\n        mapped[key] = callback(value, key, coll);\n    });\n    return mapped;\n};\n\nvar map = function (collection, callback, keyCallback) {\n    return isArray(collection) ?\n        mapToArray(collection, callback) :\n        mapToObject(collection, callback, keyCallback);\n};\n\nvar pluck = function (arrayOfObjects, key) {\n    return map(arrayOfObjects, function (val) {\n        return val[key];\n    });\n};\n\nvar filter = function (collection, callback) {\n    var filtered;\n\n    if(isArray(collection)) {\n        filtered = [];\n        foreach(collection, function (val, key, coll) {\n            if(callback(val, key, coll)) {\n                filtered.push(val);\n            }\n        });\n    }\n    else {\n        filtered = {};\n        foreach(collection, function (val, key, coll) {\n            if(callback(val, key, coll)) {\n                filtered[key] = val;\n            }\n        });\n    }\n\n    return filtered;\n};\n\nvar call = function (collection, functionName, args) {\n    return map(collection, function (object, name) {\n        return object[functionName].apply(object, args || []);\n    });\n};\n\n//execute callback immediately and at most one time on the minimumInterval,\n//ignore block attempts\nvar throttle = function (minimumInterval, callback) {\n    var timeout = null;\n    return function () {\n        var that = this, args = arguments;\n        if(timeout === null) {\n            timeout = setTimeout(function () {\n                timeout = null;\n            }, minimumInterval);\n            callback.apply(that, args);\n        }\n    };\n};\n\n\nvar mixinPubSub = function (object) {\n    object = object || {};\n    var topics = {};\n\n    object.publish = function (topic, data) {\n        foreach(topics[topic], function (callback) {\n            callback(data);\n        });\n    };\n\n    object.subscribe = function (topic, callback) {\n        topics[topic] = topics[topic] || [];\n        topics[topic].push(callback);\n    };\n\n    object.unsubscribe = function (callback) {\n        foreach(topics, function (subscribers) {\n            var index = indexOf(subscribers, callback);\n            if(index !== -1) {\n                subscribers.splice(index, 1);\n            }\n        });\n    };\n\n    return object;\n};\n\n// jquery.input version 0.0.0\n// https://github.com/DubFriend/jquery.input\n// (MIT) 09-04-2014\n// Brian Detering <BDeterin@gmail.com> (http://www.briandetering.net/)\n(function ($) {\n'use strict';\n\nvar createBaseInput = function (fig, my) {\n    var self = mixinPubSub(),\n        $self = fig.$;\n\n    self.getType = function () {\n        throw 'implement me (return type. \"text\", \"radio\", etc.)';\n    };\n\n    self.$ = function (selector) {\n        return selector ? $self.find(selector) : $self;\n    };\n\n    self.disable = function () {\n        self.$().prop('disabled', true);\n        self.publish('isEnabled', false);\n    };\n\n    self.enable = function () {\n        self.$().prop('disabled', false);\n        self.publish('isEnabled', true);\n    };\n\n    my.equalTo = function (a, b) {\n        return a === b;\n    };\n\n    my.publishChange = (function () {\n        var oldValue;\n        return function (e, domElement) {\n            var newValue = self.get();\n            if(!my.equalTo(newValue, oldValue)) {\n                self.publish('change', { e: e, domElement: domElement });\n            }\n            oldValue = newValue;\n        };\n    }());\n\n    return self;\n};\n\n\nvar createInput = function (fig, my) {\n    var self = createBaseInput(fig, my);\n\n    self.get = function () {\n        return self.$().val();\n    };\n\n    self.set = function (newValue) {\n        self.$().val(newValue);\n    };\n\n    self.clear = function () {\n        self.set('');\n    };\n\n    my.buildSetter = function (callback) {\n        return function (newValue) {\n            callback.call(self, newValue);\n        };\n    };\n\n    return self;\n};\n\nvar inputEqualToArray = function (a, b) {\n    a = isArray(a) ? a : [a];\n    b = isArray(b) ? b : [b];\n\n    var isEqual = true;\n    if(a.length !== b.length) {\n        isEqual = false;\n    }\n    else {\n        foreach(a, function (value) {\n            if(!inArray(b, value)) {\n                isEqual = false;\n            }\n        });\n    }\n\n    return isEqual;\n};\n\nvar createInputButton = function (fig) {\n    var my = {},\n        self = createInput(fig, my);\n\n    self.getType = function () {\n        return 'button';\n    };\n\n    self.$().on('change', function (e) {\n        my.publishChange(e, this);\n    });\n\n    return self;\n};\n\nvar createInputCheckbox = function (fig) {\n    var my = {},\n        self = createInput(fig, my);\n\n    self.getType = function () {\n        return 'checkbox';\n    };\n\n    self.get = function () {\n        var values = [];\n        self.$().filter(':checked').each(function () {\n            values.push($(this).val());\n        });\n        return values;\n    };\n\n    self.set = function (newValues) {\n        newValues = isArray(newValues) ? newValues : [newValues];\n\n        self.$().each(function () {\n            $(this).prop('checked', false);\n        });\n\n        foreach(newValues, function (value) {\n            self.$().filter('[value=\"' + value + '\"]')\n                .prop('checked', true);\n        });\n    };\n\n    my.equalTo = inputEqualToArray;\n\n    self.$().change(function (e) {\n        my.publishChange(e, this);\n    });\n\n    return self;\n};\n\nvar createInputEmail = function (fig) {\n    var my = {},\n        self = createInputText(fig, my);\n\n    self.getType = function () {\n        return 'email';\n    };\n\n    return self;\n};\n\nvar createInputFile = function (fig) {\n    var my = {},\n        self = createBaseInput(fig, my);\n\n    self.getType = function () {\n        return 'file';\n    };\n\n    self.get = function () {\n        return last(self.$().val().split('\\\\'));\n    };\n\n    self.clear = function () {\n        // http://stackoverflow.com/questions/1043957/clearing-input-type-file-using-jquery\n        this.$().each(function () {\n            $(this).wrap('<form>').closest('form').get(0).reset();\n            $(this).unwrap();\n        });\n    };\n\n    self.$().change(function (e) {\n        my.publishChange(e, this);\n        // self.publish('change', self);\n    });\n\n    return self;\n};\n\nvar createInputHidden = function (fig) {\n    var my = {},\n        self = createInput(fig, my);\n\n    self.getType = function () {\n        return 'hidden';\n    };\n\n    self.$().change(function (e) {\n        my.publishChange(e, this);\n    });\n\n    return self;\n};\nvar createInputMultipleFile = function (fig) {\n    var my = {},\n        self = createBaseInput(fig, my);\n\n    self.getType = function () {\n        return 'file[multiple]';\n    };\n\n    self.get = function () {\n        // http://stackoverflow.com/questions/14035530/how-to-get-value-of-html-5-multiple-file-upload-variable-using-jquery\n        var fileListObject = self.$().get(0).files || [],\n            names = [], i;\n\n        for(i = 0; i < (fileListObject.length || 0); i += 1) {\n            names.push(fileListObject[i].name);\n        }\n\n        return names;\n    };\n\n    self.clear = function () {\n        // http://stackoverflow.com/questions/1043957/clearing-input-type-file-using-jquery\n        this.$().each(function () {\n            $(this).wrap('<form>').closest('form').get(0).reset();\n            $(this).unwrap();\n        });\n    };\n\n    self.$().change(function (e) {\n        my.publishChange(e, this);\n    });\n\n    return self;\n};\n\nvar createInputMultipleSelect = function (fig) {\n    var my = {},\n        self = createInput(fig, my);\n\n    self.getType = function () {\n        return 'select[multiple]';\n    };\n\n    self.get = function () {\n        return self.$().val() || [];\n    };\n\n    self.set = function (newValues) {\n        self.$().val(\n            newValues === '' ? [] : isArray(newValues) ? newValues : [newValues]\n        );\n    };\n\n    my.equalTo = inputEqualToArray;\n\n    self.$().change(function (e) {\n        my.publishChange(e, this);\n    });\n\n    return self;\n};\n\nvar createInputPassword = function (fig) {\n    var my = {},\n        self = createInputText(fig, my);\n\n    self.getType = function () {\n        return 'password';\n    };\n\n    return self;\n};\n\nvar createInputRadio = function (fig) {\n    var my = {},\n        self = createInput(fig, my);\n\n    self.getType = function () {\n        return 'radio';\n    };\n\n    self.get = function () {\n        return self.$().filter(':checked').val() || null;\n    };\n\n    self.set = function (newValue) {\n        if(!newValue) {\n            self.$().each(function () {\n                $(this).prop('checked', false);\n            });\n        }\n        else {\n            self.$().filter('[value=\"' + newValue + '\"]').prop('checked', true);\n        }\n    };\n\n    self.$().change(function (e) {\n        my.publishChange(e, this);\n    });\n\n    return self;\n};\n\nvar createInputRange = function (fig) {\n    var my = {},\n        self = createInput(fig, my);\n\n    self.getType = function () {\n        return 'range';\n    };\n\n    self.$().change(function (e) {\n        my.publishChange(e, this);\n    });\n\n    return self;\n};\n\nvar createInputSelect = function (fig) {\n    var my = {},\n        self = createInput(fig, my);\n\n    self.getType = function () {\n        return 'select';\n    };\n\n    self.$().change(function (e) {\n        my.publishChange(e, this);\n    });\n\n    return self;\n};\n\nvar createInputText = function (fig) {\n    var my = {},\n        self = createInput(fig, my);\n\n    self.getType = function () {\n        return 'text';\n    };\n\n    self.$().on('change keyup keydown', function (e) {\n        my.publishChange(e, this);\n    });\n\n    return self;\n};\n\nvar createInputTextarea = function (fig) {\n    var my = {},\n        self = createInput(fig, my);\n\n    self.getType = function () {\n        return 'textarea';\n    };\n\n    self.$().on('change keyup keydown', function (e) {\n        my.publishChange(e, this);\n    });\n\n    return self;\n};\n\nvar createInputURL = function (fig) {\n    var my = {},\n        self = createInputText(fig, my);\n\n    self.getType = function () {\n        return 'url';\n    };\n\n    return self;\n};\n\nvar buildFormInputs = function (fig) {\n    var inputs = {},\n        $self = fig.$;\n\n    var constructor = fig.constructorOverride || {\n        button: createInputButton,\n        text: createInputText,\n        url: createInputURL,\n        email: createInputEmail,\n        password: createInputPassword,\n        range: createInputRange,\n        textarea: createInputTextarea,\n        select: createInputSelect,\n        'select[multiple]': createInputMultipleSelect,\n        radio: createInputRadio,\n        checkbox: createInputCheckbox,\n        file: createInputFile,\n        'file[multiple]': createInputMultipleFile,\n        hidden: createInputHidden\n    };\n\n    var addInputsBasic = function (type, selector) {\n        var $input = isObject(selector) ? selector : $self.find(selector);\n\n        $input.each(function () {\n            var name = $(this).attr('name');\n            inputs[name] = constructor[type]({\n                $: $(this)\n            });\n        });\n    };\n\n    var addInputsGroup = function (type, selector) {\n        var names = [],\n            $input = isObject(selector) ? selector : $self.find(selector);\n\n        if(isObject(selector)) {\n            inputs[$input.attr('name')] = constructor[type]({\n                $: $input\n            });\n        }\n        else {\n            // group by name attribute\n            $input.each(function () {\n                if(indexOf(names, $(this).attr('name')) === -1) {\n                    names.push($(this).attr('name'));\n                }\n            });\n\n            foreach(names, function (name) {\n                inputs[name] = constructor[type]({\n                    $: $self.find('input[name=\"' + name + '\"]')\n                });\n            });\n        }\n    };\n\n\n    if($self.is('input, select, textarea')) {\n        if($self.is('input[type=\"button\"], button, input[type=\"submit\"]')) {\n            addInputsBasic('button', $self);\n        }\n        else if($self.is('textarea')) {\n            addInputsBasic('textarea', $self);\n        }\n        else if(\n            $self.is('input[type=\"text\"]') ||\n            $self.is('input') && !$self.attr('type')\n        ) {\n            addInputsBasic('text', $self);\n        }\n        else if($self.is('input[type=\"password\"]')) {\n            addInputsBasic('password', $self);\n        }\n        else if($self.is('input[type=\"email\"]')) {\n            addInputsBasic('email', $self);\n        }\n        else if($self.is('input[type=\"url\"]')) {\n            addInputsBasic('url', $self);\n        }\n        else if($self.is('input[type=\"range\"]')) {\n            addInputsBasic('range', $self);\n        }\n        else if($self.is('select')) {\n            if($self.is('[multiple]')) {\n                addInputsBasic('select[multiple]', $self);\n            }\n            else {\n                addInputsBasic('select', $self);\n            }\n        }\n        else if($self.is('input[type=\"file\"]')) {\n            if($self.is('[multiple]')) {\n                addInputsBasic('file[multiple]', $self);\n            }\n            else {\n                addInputsBasic('file', $self);\n            }\n        }\n        else if($self.is('input[type=\"hidden\"]')) {\n            addInputsBasic('hidden', $self);\n        }\n        else if($self.is('input[type=\"radio\"]')) {\n            addInputsGroup('radio', $self);\n        }\n        else if($self.is('input[type=\"checkbox\"]')) {\n            addInputsGroup('checkbox', $self);\n        }\n        else {\n            //in all other cases default to a \"text\" input interface.\n            addInputsBasic('text', $self);\n        }\n    }\n    else {\n        addInputsBasic('button', 'input[type=\"button\"], button, input[type=\"submit\"]');\n        addInputsBasic('text', 'input[type=\"text\"]');\n        addInputsBasic('password', 'input[type=\"password\"]');\n        addInputsBasic('email', 'input[type=\"email\"]');\n        addInputsBasic('url', 'input[type=\"url\"]');\n        addInputsBasic('range', 'input[type=\"range\"]');\n        addInputsBasic('textarea', 'textarea');\n        addInputsBasic('select', 'select:not([multiple])');\n        addInputsBasic('select[multiple]', 'select[multiple]');\n        addInputsBasic('file', 'input[type=\"file\"]:not([multiple])');\n        addInputsBasic('file[multiple]', 'input[type=\"file\"][multiple]');\n        addInputsBasic('hidden', 'input[type=\"hidden\"]');\n        addInputsGroup('radio', 'input[type=\"radio\"]');\n        addInputsGroup('checkbox', 'input[type=\"checkbox\"]');\n    }\n\n    return inputs;\n};\n\n$.fn.inputVal = function (newValue) {\n    var $self = $(this);\n\n    var inputs = buildFormInputs({ $: $self });\n\n    if($self.is('input, textarea, select')) {\n        if(typeof newValue === 'undefined') {\n            return inputs[$self.attr('name')].get();\n        }\n        else {\n            inputs[$self.attr('name')].set(newValue);\n            return $self;\n        }\n    }\n    else {\n        if(typeof newValue === 'undefined') {\n            return call(inputs, 'get');\n        }\n        else {\n            foreach(newValue, function (value, inputName) {\n                inputs[inputName].set(value);\n            });\n            return $self;\n        }\n    }\n};\n\n$.fn.inputOnChange = function (callback) {\n    var $self = $(this);\n    var inputs = buildFormInputs({ $: $self });\n    foreach(inputs, function (input) {\n        input.subscribe('change', function (data) {\n            callback.call(data.domElement, data.e);\n        });\n    });\n    return $self;\n};\n\n$.fn.inputDisable = function () {\n    var $self = $(this);\n    call(buildFormInputs({ $: $self }), 'disable');\n    return $self;\n};\n\n$.fn.inputEnable = function () {\n    var $self = $(this);\n    call(buildFormInputs({ $: $self }), 'enable');\n    return $self;\n};\n\n$.fn.inputClear = function () {\n    var $self = $(this);\n    call(buildFormInputs({ $: $self }), 'clear');\n    return $self;\n};\n\n}(jQuery));\n\n$.fn.repeaterVal = function () {\n    var parse = function (raw) {\n        var parsed = [];\n\n        foreach(raw, function (val, key) {\n            var parsedKey = [];\n            if(key !== \"undefined\") {\n                parsedKey.push(key.match(/^[^\\[]*/)[0]);\n                parsedKey = parsedKey.concat(map(\n                    key.match(/\\[[^\\]]*\\]/g),\n                    function (bracketed) {\n                        return bracketed.replace(/[\\[\\]]/g, '');\n                    }\n                ));\n\n                parsed.push({\n                    val: val,\n                    key: parsedKey\n                });\n            }\n        });\n\n        return parsed;\n    };\n\n    var build = function (parsed) {\n        if(\n            parsed.length === 1 &&\n            (parsed[0].key.length === 0 || parsed[0].key.length === 1 && !parsed[0].key[0])\n        ) {\n            return parsed[0].val;\n        }\n\n        foreach(parsed, function (p) {\n            p.head = p.key.shift();\n        });\n\n        var grouped = (function () {\n            var grouped = {};\n\n            foreach(parsed, function (p) {\n                if(!grouped[p.head]) {\n                    grouped[p.head] = [];\n                }\n                grouped[p.head].push(p);\n            });\n\n            return grouped;\n        }());\n\n        var built;\n\n        if(/^[0-9]+$/.test(parsed[0].head)) {\n            built = [];\n            foreach(grouped, function (group) {\n                built.push(build(group));\n            });\n        }\n        else {\n            built = {};\n            foreach(grouped, function (group, key) {\n                built[key] = build(group);\n            });\n        }\n\n        return built;\n    };\n\n    return build(parse($(this).inputVal()));\n};\n\n$.fn.repeater = function (fig) {\n    fig = fig || {};\n\n    var setList;\n\n    $(this).each(function () {\n\n        var $self = $(this);\n\n        var show = fig.show || function () {\n            $(this).show();\n        };\n\n        var hide = fig.hide || function (removeElement) {\n            removeElement();\n        };\n\n        var $list = $self.find('[data-repeater-list]').first();\n\n        var $filterNested = function ($items, repeaters) {\n            return $items.filter(function () {\n                return repeaters ?\n                    $(this).closest(\n                        pluck(repeaters, 'selector').join(',')\n                    ).length === 0 : true;\n            });\n        };\n\n        var $items = function () {\n            return $filterNested($list.find('[data-repeater-item]'), fig.repeaters);\n        };\n\n        var $itemTemplate = $list.find('[data-repeater-item]')\n                                 .first().clone().hide();\n\n        var $firstDeleteButton = $filterNested(\n            $filterNested($(this).find('[data-repeater-item]'), fig.repeaters)\n            .first().find('[data-repeater-delete]'),\n            fig.repeaters\n        );\n\n        if(fig.isFirstItemUndeletable && $firstDeleteButton) {\n            $firstDeleteButton.remove();\n        }\n\n        var getGroupName = function () {\n            var groupName = $list.data('repeater-list');\n            return fig.$parent ?\n                fig.$parent.data('item-name') + '[' + groupName + ']' :\n                groupName;\n        };\n\n        var initNested = function ($listItems) {\n            if(fig.repeaters) {\n                $listItems.each(function () {\n                    var $item = $(this);\n                    foreach(fig.repeaters, function (nestedFig) {\n                        $item.find(nestedFig.selector).repeater(extend(\n                            nestedFig, { $parent: $item }\n                        ));\n                    });\n                });\n            }\n        };\n\n        var $foreachRepeaterInItem = function (repeaters, $item, cb) {\n            if(repeaters) {\n                foreach(repeaters, function (nestedFig) {\n                    cb.call($item.find(nestedFig.selector)[0], nestedFig);\n                });\n            }\n        };\n\n        var setIndexes = function ($items, groupName, repeaters) {\n            $items.each(function (index) {\n                var $item = $(this);\n                $item.data('item-name', groupName + '[' + index + ']');\n                $filterNested($item.find('[name]'), repeaters)\n                .each(function () {\n                    var $input = $(this);\n                    // match non empty brackets (ex: \"[foo]\")\n                    var matches = $input.attr('name').match(/\\[[^\\]]+\\]/g);\n\n                    var name = matches ?\n                        // strip \"[\" and \"]\" characters\n                        last(matches).replace(/\\[|\\]/g, '') :\n                        $input.attr('name');\n\n\n                    var newName = groupName + '[' + index + '][' + name + ']' +\n                        ($input.is(':checkbox') || $input.attr('multiple') ? '[]' : '');\n\n                    $input.attr('name', newName);\n\n                    $foreachRepeaterInItem(repeaters, $item, function (nestedFig) {\n                        var $repeater = $(this);\n                        setIndexes(\n                            $filterNested($repeater.find('[data-repeater-item]'), nestedFig.repeaters || []),\n                            groupName + '[' + index + ']' +\n                                        '[' + $repeater.find('[data-repeater-list]').first().data('repeater-list') + ']',\n                            nestedFig.repeaters\n                        );\n                    });\n                });\n            });\n\n            $list.find('input[name][checked]')\n                .removeAttr('checked')\n                .prop('checked', true);\n        };\n\n        setIndexes($items(), getGroupName(), fig.repeaters);\n        initNested($items());\n        if(fig.initEmpty) {\n            $items().remove();\n        }\n\n        if(fig.ready) {\n            fig.ready(function () {\n                setIndexes($items(), getGroupName(), fig.repeaters);\n            });\n        }\n\n        var appendItem = (function () {\n            var setItemsValues = function ($item, data, repeaters) {\n                if(data || fig.defaultValues) {\n                    var inputNames = {};\n                    $filterNested($item.find('[name]'), repeaters).each(function () {\n                        var key = $(this).attr('name').match(/\\[([^\\]]*)(\\]|\\]\\[\\])$/)[1];\n                        inputNames[key] = $(this).attr('name');\n                    });\n\n                    $item.inputVal(map(\n                        filter(data || fig.defaultValues, function (val, name) {\n                            return inputNames[name];\n                        }),\n                        identity,\n                        function (name) {\n                            return inputNames[name];\n                        }\n                    ));\n                }\n\n\n                $foreachRepeaterInItem(repeaters, $item, function (nestedFig) {\n                    var $repeater = $(this);\n                    $filterNested(\n                        $repeater.find('[data-repeater-item]'),\n                        nestedFig.repeaters\n                    )\n                    .each(function () {\n                        var fieldName = $repeater.find('[data-repeater-list]').data('repeater-list');\n                        if(data && data[fieldName]) {\n                            var $template = $(this).clone();\n                            $repeater.find('[data-repeater-item]').remove();\n                            foreach(data[fieldName], function (data) {\n                                var $item = $template.clone();\n                                setItemsValues(\n                                    $item,\n                                    data,\n                                    nestedFig.repeaters || []\n                                );\n                                $repeater.find('[data-repeater-list]').append($item);\n                            });\n                        }\n                        else {\n                            setItemsValues(\n                                $(this),\n                                nestedFig.defaultValues,\n                                nestedFig.repeaters || []\n                            );\n                        }\n                    });\n                });\n\n            };\n\n            return function ($item, data) {\n                $list.append($item);\n                setIndexes($items(), getGroupName(), fig.repeaters);\n                $item.find('[name]').each(function () {\n                    $(this).inputClear();\n                });\n                setItemsValues($item, data || fig.defaultValues, fig.repeaters);\n            };\n        }());\n\n        var addItem = function (data) {\n            var $item = $itemTemplate.clone();\n            appendItem($item, data);\n            if(fig.repeaters) {\n                initNested($item);\n            }\n            show.call($item.get(0));\n        };\n\n        setList = function (rows) {\n            $items().remove();\n            foreach(rows, addItem);\n        };\n\n        $filterNested($self.find('[data-repeater-create]'), fig.repeaters).click(function () {\n            addItem();\n        });\n\n        $list.on('click', '[data-repeater-delete]', function () {\n            var self = $(this).closest('[data-repeater-item]').get(0);\n            hide.call(self, function () {\n                $(self).remove();\n                setIndexes($items(), getGroupName(), fig.repeaters);\n            });\n        });\n    });\n\n    this.setList = setList;\n\n    return this;\n};\n\n}(jQuery));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvanF1ZXJ5LnJlcGVhdGVyL2pxdWVyeS5yZXBlYXRlci5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5Qyw4QkFBOEI7QUFDdkU7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlO0FBQ2Y7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQSxlQUFlO0FBQ2Y7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBLGVBQWU7QUFDZjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLGVBQWU7QUFDZjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0EsZUFBZTtBQUNmOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG1CQUFtQixrQ0FBa0M7QUFDckQ7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBLGVBQWU7QUFDZjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBLGVBQWU7QUFDZjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLGVBQWU7QUFDZjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBLGVBQWU7QUFDZjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBLGVBQWU7QUFDZjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBLGVBQWU7QUFDZjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBLGVBQWU7QUFDZjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBLGVBQWU7QUFDZjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLG1CQUFtQjtBQUNuQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBLG1DQUFtQyxVQUFVOztBQUU3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsbUNBQW1DLFVBQVU7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQSwyQkFBMkIsVUFBVTtBQUNyQztBQUNBOztBQUVBO0FBQ0E7QUFDQSwyQkFBMkIsVUFBVTtBQUNyQztBQUNBOztBQUVBO0FBQ0E7QUFDQSwyQkFBMkIsVUFBVTtBQUNyQztBQUNBOztBQUVBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLFNBQVM7O0FBRVQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0EsU0FBUzs7QUFFVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQSxxQkFBcUI7QUFDckIsaUJBQWlCO0FBQ2pCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakIsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjs7QUFFckI7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixpQkFBaUI7O0FBRWpCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVCxLQUFLOztBQUVMOztBQUVBO0FBQ0E7O0FBRUEsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL01hdGVyaW8vLi9ub2RlX21vZHVsZXMvanF1ZXJ5LnJlcGVhdGVyL2pxdWVyeS5yZXBlYXRlci5qcz9lMzZlIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGpxdWVyeS5yZXBlYXRlciB2ZXJzaW9uIDEuMi4xXG4vLyBodHRwczovL2dpdGh1Yi5jb20vRHViRnJpZW5kL2pxdWVyeS5yZXBlYXRlclxuLy8gKE1JVCkgMDktMTAtMjAxNlxuLy8gQnJpYW4gRGV0ZXJpbmcgPEJEZXRlcmluQGdtYWlsLmNvbT4gKGh0dHA6Ly93d3cuYnJpYW5kZXRlcmluZy5uZXQvKVxuKGZ1bmN0aW9uICgkKSB7XG4ndXNlIHN0cmljdCc7XG5cbnZhciBpZGVudGl0eSA9IGZ1bmN0aW9uICh4KSB7XG4gICAgcmV0dXJuIHg7XG59O1xuXG52YXIgaXNBcnJheSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHJldHVybiAkLmlzQXJyYXkodmFsdWUpO1xufTtcblxudmFyIGlzT2JqZWN0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgcmV0dXJuICFpc0FycmF5KHZhbHVlKSAmJiAodmFsdWUgaW5zdGFuY2VvZiBPYmplY3QpO1xufTtcblxudmFyIGlzTnVtYmVyID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgTnVtYmVyO1xufTtcblxudmFyIGlzRnVuY3Rpb24gPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBGdW5jdGlvbjtcbn07XG5cbnZhciBpbmRleE9mID0gZnVuY3Rpb24gKG9iamVjdCwgdmFsdWUpIHtcbiAgICByZXR1cm4gJC5pbkFycmF5KHZhbHVlLCBvYmplY3QpO1xufTtcblxudmFyIGluQXJyYXkgPSBmdW5jdGlvbiAoYXJyYXksIHZhbHVlKSB7XG4gICAgcmV0dXJuIGluZGV4T2YoYXJyYXksIHZhbHVlKSAhPT0gLTE7XG59O1xuXG52YXIgZm9yZWFjaCA9IGZ1bmN0aW9uIChjb2xsZWN0aW9uLCBjYWxsYmFjaykge1xuICAgIGZvcih2YXIgaSBpbiBjb2xsZWN0aW9uKSB7XG4gICAgICAgIGlmKGNvbGxlY3Rpb24uaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKGNvbGxlY3Rpb25baV0sIGksIGNvbGxlY3Rpb24pO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuXG52YXIgbGFzdCA9IGZ1bmN0aW9uIChhcnJheSkge1xuICAgIHJldHVybiBhcnJheVthcnJheS5sZW5ndGggLSAxXTtcbn07XG5cbnZhciBhcmd1bWVudHNUb0FycmF5ID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJncyk7XG59O1xuXG52YXIgZXh0ZW5kID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRlZCA9IHt9O1xuICAgIGZvcmVhY2goYXJndW1lbnRzVG9BcnJheShhcmd1bWVudHMpLCBmdW5jdGlvbiAobykge1xuICAgICAgICBmb3JlYWNoKG8sIGZ1bmN0aW9uICh2YWwsIGtleSkge1xuICAgICAgICAgICAgZXh0ZW5kZWRba2V5XSA9IHZhbDtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGV4dGVuZGVkO1xufTtcblxudmFyIG1hcFRvQXJyYXkgPSBmdW5jdGlvbiAoY29sbGVjdGlvbiwgY2FsbGJhY2spIHtcbiAgICB2YXIgbWFwcGVkID0gW107XG4gICAgZm9yZWFjaChjb2xsZWN0aW9uLCBmdW5jdGlvbiAodmFsdWUsIGtleSwgY29sbCkge1xuICAgICAgICBtYXBwZWQucHVzaChjYWxsYmFjayh2YWx1ZSwga2V5LCBjb2xsKSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIG1hcHBlZDtcbn07XG5cbnZhciBtYXBUb09iamVjdCA9IGZ1bmN0aW9uIChjb2xsZWN0aW9uLCBjYWxsYmFjaywga2V5Q2FsbGJhY2spIHtcbiAgICB2YXIgbWFwcGVkID0ge307XG4gICAgZm9yZWFjaChjb2xsZWN0aW9uLCBmdW5jdGlvbiAodmFsdWUsIGtleSwgY29sbCkge1xuICAgICAgICBrZXkgPSBrZXlDYWxsYmFjayA/IGtleUNhbGxiYWNrKGtleSwgdmFsdWUpIDoga2V5O1xuICAgICAgICBtYXBwZWRba2V5XSA9IGNhbGxiYWNrKHZhbHVlLCBrZXksIGNvbGwpO1xuICAgIH0pO1xuICAgIHJldHVybiBtYXBwZWQ7XG59O1xuXG52YXIgbWFwID0gZnVuY3Rpb24gKGNvbGxlY3Rpb24sIGNhbGxiYWNrLCBrZXlDYWxsYmFjaykge1xuICAgIHJldHVybiBpc0FycmF5KGNvbGxlY3Rpb24pID9cbiAgICAgICAgbWFwVG9BcnJheShjb2xsZWN0aW9uLCBjYWxsYmFjaykgOlxuICAgICAgICBtYXBUb09iamVjdChjb2xsZWN0aW9uLCBjYWxsYmFjaywga2V5Q2FsbGJhY2spO1xufTtcblxudmFyIHBsdWNrID0gZnVuY3Rpb24gKGFycmF5T2ZPYmplY3RzLCBrZXkpIHtcbiAgICByZXR1cm4gbWFwKGFycmF5T2ZPYmplY3RzLCBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgIHJldHVybiB2YWxba2V5XTtcbiAgICB9KTtcbn07XG5cbnZhciBmaWx0ZXIgPSBmdW5jdGlvbiAoY29sbGVjdGlvbiwgY2FsbGJhY2spIHtcbiAgICB2YXIgZmlsdGVyZWQ7XG5cbiAgICBpZihpc0FycmF5KGNvbGxlY3Rpb24pKSB7XG4gICAgICAgIGZpbHRlcmVkID0gW107XG4gICAgICAgIGZvcmVhY2goY29sbGVjdGlvbiwgZnVuY3Rpb24gKHZhbCwga2V5LCBjb2xsKSB7XG4gICAgICAgICAgICBpZihjYWxsYmFjayh2YWwsIGtleSwgY29sbCkpIHtcbiAgICAgICAgICAgICAgICBmaWx0ZXJlZC5wdXNoKHZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZmlsdGVyZWQgPSB7fTtcbiAgICAgICAgZm9yZWFjaChjb2xsZWN0aW9uLCBmdW5jdGlvbiAodmFsLCBrZXksIGNvbGwpIHtcbiAgICAgICAgICAgIGlmKGNhbGxiYWNrKHZhbCwga2V5LCBjb2xsKSkge1xuICAgICAgICAgICAgICAgIGZpbHRlcmVkW2tleV0gPSB2YWw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBmaWx0ZXJlZDtcbn07XG5cbnZhciBjYWxsID0gZnVuY3Rpb24gKGNvbGxlY3Rpb24sIGZ1bmN0aW9uTmFtZSwgYXJncykge1xuICAgIHJldHVybiBtYXAoY29sbGVjdGlvbiwgZnVuY3Rpb24gKG9iamVjdCwgbmFtZSkge1xuICAgICAgICByZXR1cm4gb2JqZWN0W2Z1bmN0aW9uTmFtZV0uYXBwbHkob2JqZWN0LCBhcmdzIHx8IFtdKTtcbiAgICB9KTtcbn07XG5cbi8vZXhlY3V0ZSBjYWxsYmFjayBpbW1lZGlhdGVseSBhbmQgYXQgbW9zdCBvbmUgdGltZSBvbiB0aGUgbWluaW11bUludGVydmFsLFxuLy9pZ25vcmUgYmxvY2sgYXR0ZW1wdHNcbnZhciB0aHJvdHRsZSA9IGZ1bmN0aW9uIChtaW5pbXVtSW50ZXJ2YWwsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHRpbWVvdXQgPSBudWxsO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0aGF0ID0gdGhpcywgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgaWYodGltZW91dCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgICAgICAgfSwgbWluaW11bUludGVydmFsKTtcbiAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHRoYXQsIGFyZ3MpO1xuICAgICAgICB9XG4gICAgfTtcbn07XG5cblxudmFyIG1peGluUHViU3ViID0gZnVuY3Rpb24gKG9iamVjdCkge1xuICAgIG9iamVjdCA9IG9iamVjdCB8fCB7fTtcbiAgICB2YXIgdG9waWNzID0ge307XG5cbiAgICBvYmplY3QucHVibGlzaCA9IGZ1bmN0aW9uICh0b3BpYywgZGF0YSkge1xuICAgICAgICBmb3JlYWNoKHRvcGljc1t0b3BpY10sIGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAgICAgY2FsbGJhY2soZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBvYmplY3Quc3Vic2NyaWJlID0gZnVuY3Rpb24gKHRvcGljLCBjYWxsYmFjaykge1xuICAgICAgICB0b3BpY3NbdG9waWNdID0gdG9waWNzW3RvcGljXSB8fCBbXTtcbiAgICAgICAgdG9waWNzW3RvcGljXS5wdXNoKGNhbGxiYWNrKTtcbiAgICB9O1xuXG4gICAgb2JqZWN0LnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgIGZvcmVhY2godG9waWNzLCBmdW5jdGlvbiAoc3Vic2NyaWJlcnMpIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IGluZGV4T2Yoc3Vic2NyaWJlcnMsIGNhbGxiYWNrKTtcbiAgICAgICAgICAgIGlmKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICByZXR1cm4gb2JqZWN0O1xufTtcblxuLy8ganF1ZXJ5LmlucHV0IHZlcnNpb24gMC4wLjBcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9EdWJGcmllbmQvanF1ZXJ5LmlucHV0XG4vLyAoTUlUKSAwOS0wNC0yMDE0XG4vLyBCcmlhbiBEZXRlcmluZyA8QkRldGVyaW5AZ21haWwuY29tPiAoaHR0cDovL3d3dy5icmlhbmRldGVyaW5nLm5ldC8pXG4oZnVuY3Rpb24gKCQpIHtcbid1c2Ugc3RyaWN0JztcblxudmFyIGNyZWF0ZUJhc2VJbnB1dCA9IGZ1bmN0aW9uIChmaWcsIG15KSB7XG4gICAgdmFyIHNlbGYgPSBtaXhpblB1YlN1YigpLFxuICAgICAgICAkc2VsZiA9IGZpZy4kO1xuXG4gICAgc2VsZi5nZXRUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aHJvdyAnaW1wbGVtZW50IG1lIChyZXR1cm4gdHlwZS4gXCJ0ZXh0XCIsIFwicmFkaW9cIiwgZXRjLiknO1xuICAgIH07XG5cbiAgICBzZWxmLiQgPSBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgICAgICAgcmV0dXJuIHNlbGVjdG9yID8gJHNlbGYuZmluZChzZWxlY3RvcikgOiAkc2VsZjtcbiAgICB9O1xuXG4gICAgc2VsZi5kaXNhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLiQoKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgICBzZWxmLnB1Ymxpc2goJ2lzRW5hYmxlZCcsIGZhbHNlKTtcbiAgICB9O1xuXG4gICAgc2VsZi5lbmFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuJCgpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuICAgICAgICBzZWxmLnB1Ymxpc2goJ2lzRW5hYmxlZCcsIHRydWUpO1xuICAgIH07XG5cbiAgICBteS5lcXVhbFRvID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGEgPT09IGI7XG4gICAgfTtcblxuICAgIG15LnB1Ymxpc2hDaGFuZ2UgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgb2xkVmFsdWU7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSwgZG9tRWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIG5ld1ZhbHVlID0gc2VsZi5nZXQoKTtcbiAgICAgICAgICAgIGlmKCFteS5lcXVhbFRvKG5ld1ZhbHVlLCBvbGRWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBzZWxmLnB1Ymxpc2goJ2NoYW5nZScsIHsgZTogZSwgZG9tRWxlbWVudDogZG9tRWxlbWVudCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9sZFZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgIH07XG4gICAgfSgpKTtcblxuICAgIHJldHVybiBzZWxmO1xufTtcblxuXG52YXIgY3JlYXRlSW5wdXQgPSBmdW5jdGlvbiAoZmlnLCBteSkge1xuICAgIHZhciBzZWxmID0gY3JlYXRlQmFzZUlucHV0KGZpZywgbXkpO1xuXG4gICAgc2VsZi5nZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBzZWxmLiQoKS52YWwoKTtcbiAgICB9O1xuXG4gICAgc2VsZi5zZXQgPSBmdW5jdGlvbiAobmV3VmFsdWUpIHtcbiAgICAgICAgc2VsZi4kKCkudmFsKG5ld1ZhbHVlKTtcbiAgICB9O1xuXG4gICAgc2VsZi5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5zZXQoJycpO1xuICAgIH07XG5cbiAgICBteS5idWlsZFNldHRlciA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICBjYWxsYmFjay5jYWxsKHNlbGYsIG5ld1ZhbHVlKTtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHNlbGY7XG59O1xuXG52YXIgaW5wdXRFcXVhbFRvQXJyYXkgPSBmdW5jdGlvbiAoYSwgYikge1xuICAgIGEgPSBpc0FycmF5KGEpID8gYSA6IFthXTtcbiAgICBiID0gaXNBcnJheShiKSA/IGIgOiBbYl07XG5cbiAgICB2YXIgaXNFcXVhbCA9IHRydWU7XG4gICAgaWYoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7XG4gICAgICAgIGlzRXF1YWwgPSBmYWxzZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGZvcmVhY2goYSwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBpZighaW5BcnJheShiLCB2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBpc0VxdWFsID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBpc0VxdWFsO1xufTtcblxudmFyIGNyZWF0ZUlucHV0QnV0dG9uID0gZnVuY3Rpb24gKGZpZykge1xuICAgIHZhciBteSA9IHt9LFxuICAgICAgICBzZWxmID0gY3JlYXRlSW5wdXQoZmlnLCBteSk7XG5cbiAgICBzZWxmLmdldFR5cGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAnYnV0dG9uJztcbiAgICB9O1xuXG4gICAgc2VsZi4kKCkub24oJ2NoYW5nZScsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIG15LnB1Ymxpc2hDaGFuZ2UoZSwgdGhpcyk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gc2VsZjtcbn07XG5cbnZhciBjcmVhdGVJbnB1dENoZWNrYm94ID0gZnVuY3Rpb24gKGZpZykge1xuICAgIHZhciBteSA9IHt9LFxuICAgICAgICBzZWxmID0gY3JlYXRlSW5wdXQoZmlnLCBteSk7XG5cbiAgICBzZWxmLmdldFR5cGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAnY2hlY2tib3gnO1xuICAgIH07XG5cbiAgICBzZWxmLmdldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHZhbHVlcyA9IFtdO1xuICAgICAgICBzZWxmLiQoKS5maWx0ZXIoJzpjaGVja2VkJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YWx1ZXMucHVzaCgkKHRoaXMpLnZhbCgpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgfTtcblxuICAgIHNlbGYuc2V0ID0gZnVuY3Rpb24gKG5ld1ZhbHVlcykge1xuICAgICAgICBuZXdWYWx1ZXMgPSBpc0FycmF5KG5ld1ZhbHVlcykgPyBuZXdWYWx1ZXMgOiBbbmV3VmFsdWVzXTtcblxuICAgICAgICBzZWxmLiQoKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQodGhpcykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZm9yZWFjaChuZXdWYWx1ZXMsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgc2VsZi4kKCkuZmlsdGVyKCdbdmFsdWU9XCInICsgdmFsdWUgKyAnXCJdJylcbiAgICAgICAgICAgICAgICAucHJvcCgnY2hlY2tlZCcsIHRydWUpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgbXkuZXF1YWxUbyA9IGlucHV0RXF1YWxUb0FycmF5O1xuXG4gICAgc2VsZi4kKCkuY2hhbmdlKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIG15LnB1Ymxpc2hDaGFuZ2UoZSwgdGhpcyk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gc2VsZjtcbn07XG5cbnZhciBjcmVhdGVJbnB1dEVtYWlsID0gZnVuY3Rpb24gKGZpZykge1xuICAgIHZhciBteSA9IHt9LFxuICAgICAgICBzZWxmID0gY3JlYXRlSW5wdXRUZXh0KGZpZywgbXkpO1xuXG4gICAgc2VsZi5nZXRUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJ2VtYWlsJztcbiAgICB9O1xuXG4gICAgcmV0dXJuIHNlbGY7XG59O1xuXG52YXIgY3JlYXRlSW5wdXRGaWxlID0gZnVuY3Rpb24gKGZpZykge1xuICAgIHZhciBteSA9IHt9LFxuICAgICAgICBzZWxmID0gY3JlYXRlQmFzZUlucHV0KGZpZywgbXkpO1xuXG4gICAgc2VsZi5nZXRUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJ2ZpbGUnO1xuICAgIH07XG5cbiAgICBzZWxmLmdldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGxhc3Qoc2VsZi4kKCkudmFsKCkuc3BsaXQoJ1xcXFwnKSk7XG4gICAgfTtcblxuICAgIHNlbGYuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTA0Mzk1Ny9jbGVhcmluZy1pbnB1dC10eXBlLWZpbGUtdXNpbmctanF1ZXJ5XG4gICAgICAgIHRoaXMuJCgpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCh0aGlzKS53cmFwKCc8Zm9ybT4nKS5jbG9zZXN0KCdmb3JtJykuZ2V0KDApLnJlc2V0KCk7XG4gICAgICAgICAgICAkKHRoaXMpLnVud3JhcCgpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgc2VsZi4kKCkuY2hhbmdlKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIG15LnB1Ymxpc2hDaGFuZ2UoZSwgdGhpcyk7XG4gICAgICAgIC8vIHNlbGYucHVibGlzaCgnY2hhbmdlJywgc2VsZik7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gc2VsZjtcbn07XG5cbnZhciBjcmVhdGVJbnB1dEhpZGRlbiA9IGZ1bmN0aW9uIChmaWcpIHtcbiAgICB2YXIgbXkgPSB7fSxcbiAgICAgICAgc2VsZiA9IGNyZWF0ZUlucHV0KGZpZywgbXkpO1xuXG4gICAgc2VsZi5nZXRUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJ2hpZGRlbic7XG4gICAgfTtcblxuICAgIHNlbGYuJCgpLmNoYW5nZShmdW5jdGlvbiAoZSkge1xuICAgICAgICBteS5wdWJsaXNoQ2hhbmdlKGUsIHRoaXMpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHNlbGY7XG59O1xudmFyIGNyZWF0ZUlucHV0TXVsdGlwbGVGaWxlID0gZnVuY3Rpb24gKGZpZykge1xuICAgIHZhciBteSA9IHt9LFxuICAgICAgICBzZWxmID0gY3JlYXRlQmFzZUlucHV0KGZpZywgbXkpO1xuXG4gICAgc2VsZi5nZXRUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJ2ZpbGVbbXVsdGlwbGVdJztcbiAgICB9O1xuXG4gICAgc2VsZi5nZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTQwMzU1MzAvaG93LXRvLWdldC12YWx1ZS1vZi1odG1sLTUtbXVsdGlwbGUtZmlsZS11cGxvYWQtdmFyaWFibGUtdXNpbmctanF1ZXJ5XG4gICAgICAgIHZhciBmaWxlTGlzdE9iamVjdCA9IHNlbGYuJCgpLmdldCgwKS5maWxlcyB8fCBbXSxcbiAgICAgICAgICAgIG5hbWVzID0gW10sIGk7XG5cbiAgICAgICAgZm9yKGkgPSAwOyBpIDwgKGZpbGVMaXN0T2JqZWN0Lmxlbmd0aCB8fCAwKTsgaSArPSAxKSB7XG4gICAgICAgICAgICBuYW1lcy5wdXNoKGZpbGVMaXN0T2JqZWN0W2ldLm5hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5hbWVzO1xuICAgIH07XG5cbiAgICBzZWxmLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzEwNDM5NTcvY2xlYXJpbmctaW5wdXQtdHlwZS1maWxlLXVzaW5nLWpxdWVyeVxuICAgICAgICB0aGlzLiQoKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQodGhpcykud3JhcCgnPGZvcm0+JykuY2xvc2VzdCgnZm9ybScpLmdldCgwKS5yZXNldCgpO1xuICAgICAgICAgICAgJCh0aGlzKS51bndyYXAoKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHNlbGYuJCgpLmNoYW5nZShmdW5jdGlvbiAoZSkge1xuICAgICAgICBteS5wdWJsaXNoQ2hhbmdlKGUsIHRoaXMpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHNlbGY7XG59O1xuXG52YXIgY3JlYXRlSW5wdXRNdWx0aXBsZVNlbGVjdCA9IGZ1bmN0aW9uIChmaWcpIHtcbiAgICB2YXIgbXkgPSB7fSxcbiAgICAgICAgc2VsZiA9IGNyZWF0ZUlucHV0KGZpZywgbXkpO1xuXG4gICAgc2VsZi5nZXRUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJ3NlbGVjdFttdWx0aXBsZV0nO1xuICAgIH07XG5cbiAgICBzZWxmLmdldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHNlbGYuJCgpLnZhbCgpIHx8IFtdO1xuICAgIH07XG5cbiAgICBzZWxmLnNldCA9IGZ1bmN0aW9uIChuZXdWYWx1ZXMpIHtcbiAgICAgICAgc2VsZi4kKCkudmFsKFxuICAgICAgICAgICAgbmV3VmFsdWVzID09PSAnJyA/IFtdIDogaXNBcnJheShuZXdWYWx1ZXMpID8gbmV3VmFsdWVzIDogW25ld1ZhbHVlc11cbiAgICAgICAgKTtcbiAgICB9O1xuXG4gICAgbXkuZXF1YWxUbyA9IGlucHV0RXF1YWxUb0FycmF5O1xuXG4gICAgc2VsZi4kKCkuY2hhbmdlKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIG15LnB1Ymxpc2hDaGFuZ2UoZSwgdGhpcyk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gc2VsZjtcbn07XG5cbnZhciBjcmVhdGVJbnB1dFBhc3N3b3JkID0gZnVuY3Rpb24gKGZpZykge1xuICAgIHZhciBteSA9IHt9LFxuICAgICAgICBzZWxmID0gY3JlYXRlSW5wdXRUZXh0KGZpZywgbXkpO1xuXG4gICAgc2VsZi5nZXRUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJ3Bhc3N3b3JkJztcbiAgICB9O1xuXG4gICAgcmV0dXJuIHNlbGY7XG59O1xuXG52YXIgY3JlYXRlSW5wdXRSYWRpbyA9IGZ1bmN0aW9uIChmaWcpIHtcbiAgICB2YXIgbXkgPSB7fSxcbiAgICAgICAgc2VsZiA9IGNyZWF0ZUlucHV0KGZpZywgbXkpO1xuXG4gICAgc2VsZi5nZXRUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJ3JhZGlvJztcbiAgICB9O1xuXG4gICAgc2VsZi5nZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBzZWxmLiQoKS5maWx0ZXIoJzpjaGVja2VkJykudmFsKCkgfHwgbnVsbDtcbiAgICB9O1xuXG4gICAgc2VsZi5zZXQgPSBmdW5jdGlvbiAobmV3VmFsdWUpIHtcbiAgICAgICAgaWYoIW5ld1ZhbHVlKSB7XG4gICAgICAgICAgICBzZWxmLiQoKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNlbGYuJCgpLmZpbHRlcignW3ZhbHVlPVwiJyArIG5ld1ZhbHVlICsgJ1wiXScpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBzZWxmLiQoKS5jaGFuZ2UoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgbXkucHVibGlzaENoYW5nZShlLCB0aGlzKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBzZWxmO1xufTtcblxudmFyIGNyZWF0ZUlucHV0UmFuZ2UgPSBmdW5jdGlvbiAoZmlnKSB7XG4gICAgdmFyIG15ID0ge30sXG4gICAgICAgIHNlbGYgPSBjcmVhdGVJbnB1dChmaWcsIG15KTtcblxuICAgIHNlbGYuZ2V0VHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICdyYW5nZSc7XG4gICAgfTtcblxuICAgIHNlbGYuJCgpLmNoYW5nZShmdW5jdGlvbiAoZSkge1xuICAgICAgICBteS5wdWJsaXNoQ2hhbmdlKGUsIHRoaXMpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHNlbGY7XG59O1xuXG52YXIgY3JlYXRlSW5wdXRTZWxlY3QgPSBmdW5jdGlvbiAoZmlnKSB7XG4gICAgdmFyIG15ID0ge30sXG4gICAgICAgIHNlbGYgPSBjcmVhdGVJbnB1dChmaWcsIG15KTtcblxuICAgIHNlbGYuZ2V0VHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICdzZWxlY3QnO1xuICAgIH07XG5cbiAgICBzZWxmLiQoKS5jaGFuZ2UoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgbXkucHVibGlzaENoYW5nZShlLCB0aGlzKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBzZWxmO1xufTtcblxudmFyIGNyZWF0ZUlucHV0VGV4dCA9IGZ1bmN0aW9uIChmaWcpIHtcbiAgICB2YXIgbXkgPSB7fSxcbiAgICAgICAgc2VsZiA9IGNyZWF0ZUlucHV0KGZpZywgbXkpO1xuXG4gICAgc2VsZi5nZXRUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJ3RleHQnO1xuICAgIH07XG5cbiAgICBzZWxmLiQoKS5vbignY2hhbmdlIGtleXVwIGtleWRvd24nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBteS5wdWJsaXNoQ2hhbmdlKGUsIHRoaXMpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHNlbGY7XG59O1xuXG52YXIgY3JlYXRlSW5wdXRUZXh0YXJlYSA9IGZ1bmN0aW9uIChmaWcpIHtcbiAgICB2YXIgbXkgPSB7fSxcbiAgICAgICAgc2VsZiA9IGNyZWF0ZUlucHV0KGZpZywgbXkpO1xuXG4gICAgc2VsZi5nZXRUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJ3RleHRhcmVhJztcbiAgICB9O1xuXG4gICAgc2VsZi4kKCkub24oJ2NoYW5nZSBrZXl1cCBrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgbXkucHVibGlzaENoYW5nZShlLCB0aGlzKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBzZWxmO1xufTtcblxudmFyIGNyZWF0ZUlucHV0VVJMID0gZnVuY3Rpb24gKGZpZykge1xuICAgIHZhciBteSA9IHt9LFxuICAgICAgICBzZWxmID0gY3JlYXRlSW5wdXRUZXh0KGZpZywgbXkpO1xuXG4gICAgc2VsZi5nZXRUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJ3VybCc7XG4gICAgfTtcblxuICAgIHJldHVybiBzZWxmO1xufTtcblxudmFyIGJ1aWxkRm9ybUlucHV0cyA9IGZ1bmN0aW9uIChmaWcpIHtcbiAgICB2YXIgaW5wdXRzID0ge30sXG4gICAgICAgICRzZWxmID0gZmlnLiQ7XG5cbiAgICB2YXIgY29uc3RydWN0b3IgPSBmaWcuY29uc3RydWN0b3JPdmVycmlkZSB8fCB7XG4gICAgICAgIGJ1dHRvbjogY3JlYXRlSW5wdXRCdXR0b24sXG4gICAgICAgIHRleHQ6IGNyZWF0ZUlucHV0VGV4dCxcbiAgICAgICAgdXJsOiBjcmVhdGVJbnB1dFVSTCxcbiAgICAgICAgZW1haWw6IGNyZWF0ZUlucHV0RW1haWwsXG4gICAgICAgIHBhc3N3b3JkOiBjcmVhdGVJbnB1dFBhc3N3b3JkLFxuICAgICAgICByYW5nZTogY3JlYXRlSW5wdXRSYW5nZSxcbiAgICAgICAgdGV4dGFyZWE6IGNyZWF0ZUlucHV0VGV4dGFyZWEsXG4gICAgICAgIHNlbGVjdDogY3JlYXRlSW5wdXRTZWxlY3QsXG4gICAgICAgICdzZWxlY3RbbXVsdGlwbGVdJzogY3JlYXRlSW5wdXRNdWx0aXBsZVNlbGVjdCxcbiAgICAgICAgcmFkaW86IGNyZWF0ZUlucHV0UmFkaW8sXG4gICAgICAgIGNoZWNrYm94OiBjcmVhdGVJbnB1dENoZWNrYm94LFxuICAgICAgICBmaWxlOiBjcmVhdGVJbnB1dEZpbGUsXG4gICAgICAgICdmaWxlW211bHRpcGxlXSc6IGNyZWF0ZUlucHV0TXVsdGlwbGVGaWxlLFxuICAgICAgICBoaWRkZW46IGNyZWF0ZUlucHV0SGlkZGVuXG4gICAgfTtcblxuICAgIHZhciBhZGRJbnB1dHNCYXNpYyA9IGZ1bmN0aW9uICh0eXBlLCBzZWxlY3Rvcikge1xuICAgICAgICB2YXIgJGlucHV0ID0gaXNPYmplY3Qoc2VsZWN0b3IpID8gc2VsZWN0b3IgOiAkc2VsZi5maW5kKHNlbGVjdG9yKTtcblxuICAgICAgICAkaW5wdXQuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbmFtZSA9ICQodGhpcykuYXR0cignbmFtZScpO1xuICAgICAgICAgICAgaW5wdXRzW25hbWVdID0gY29uc3RydWN0b3JbdHlwZV0oe1xuICAgICAgICAgICAgICAgICQ6ICQodGhpcylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdmFyIGFkZElucHV0c0dyb3VwID0gZnVuY3Rpb24gKHR5cGUsIHNlbGVjdG9yKSB7XG4gICAgICAgIHZhciBuYW1lcyA9IFtdLFxuICAgICAgICAgICAgJGlucHV0ID0gaXNPYmplY3Qoc2VsZWN0b3IpID8gc2VsZWN0b3IgOiAkc2VsZi5maW5kKHNlbGVjdG9yKTtcblxuICAgICAgICBpZihpc09iamVjdChzZWxlY3RvcikpIHtcbiAgICAgICAgICAgIGlucHV0c1skaW5wdXQuYXR0cignbmFtZScpXSA9IGNvbnN0cnVjdG9yW3R5cGVdKHtcbiAgICAgICAgICAgICAgICAkOiAkaW5wdXRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gZ3JvdXAgYnkgbmFtZSBhdHRyaWJ1dGVcbiAgICAgICAgICAgICRpbnB1dC5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZihpbmRleE9mKG5hbWVzLCAkKHRoaXMpLmF0dHIoJ25hbWUnKSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWVzLnB1c2goJCh0aGlzKS5hdHRyKCduYW1lJykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBmb3JlYWNoKG5hbWVzLCBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgICAgIGlucHV0c1tuYW1lXSA9IGNvbnN0cnVjdG9yW3R5cGVdKHtcbiAgICAgICAgICAgICAgICAgICAgJDogJHNlbGYuZmluZCgnaW5wdXRbbmFtZT1cIicgKyBuYW1lICsgJ1wiXScpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cblxuICAgIGlmKCRzZWxmLmlzKCdpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYScpKSB7XG4gICAgICAgIGlmKCRzZWxmLmlzKCdpbnB1dFt0eXBlPVwiYnV0dG9uXCJdLCBidXR0b24sIGlucHV0W3R5cGU9XCJzdWJtaXRcIl0nKSkge1xuICAgICAgICAgICAgYWRkSW5wdXRzQmFzaWMoJ2J1dHRvbicsICRzZWxmKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKCRzZWxmLmlzKCd0ZXh0YXJlYScpKSB7XG4gICAgICAgICAgICBhZGRJbnB1dHNCYXNpYygndGV4dGFyZWEnLCAkc2VsZik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZihcbiAgICAgICAgICAgICRzZWxmLmlzKCdpbnB1dFt0eXBlPVwidGV4dFwiXScpIHx8XG4gICAgICAgICAgICAkc2VsZi5pcygnaW5wdXQnKSAmJiAhJHNlbGYuYXR0cigndHlwZScpXG4gICAgICAgICkge1xuICAgICAgICAgICAgYWRkSW5wdXRzQmFzaWMoJ3RleHQnLCAkc2VsZik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZigkc2VsZi5pcygnaW5wdXRbdHlwZT1cInBhc3N3b3JkXCJdJykpIHtcbiAgICAgICAgICAgIGFkZElucHV0c0Jhc2ljKCdwYXNzd29yZCcsICRzZWxmKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKCRzZWxmLmlzKCdpbnB1dFt0eXBlPVwiZW1haWxcIl0nKSkge1xuICAgICAgICAgICAgYWRkSW5wdXRzQmFzaWMoJ2VtYWlsJywgJHNlbGYpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYoJHNlbGYuaXMoJ2lucHV0W3R5cGU9XCJ1cmxcIl0nKSkge1xuICAgICAgICAgICAgYWRkSW5wdXRzQmFzaWMoJ3VybCcsICRzZWxmKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKCRzZWxmLmlzKCdpbnB1dFt0eXBlPVwicmFuZ2VcIl0nKSkge1xuICAgICAgICAgICAgYWRkSW5wdXRzQmFzaWMoJ3JhbmdlJywgJHNlbGYpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYoJHNlbGYuaXMoJ3NlbGVjdCcpKSB7XG4gICAgICAgICAgICBpZigkc2VsZi5pcygnW211bHRpcGxlXScpKSB7XG4gICAgICAgICAgICAgICAgYWRkSW5wdXRzQmFzaWMoJ3NlbGVjdFttdWx0aXBsZV0nLCAkc2VsZik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhZGRJbnB1dHNCYXNpYygnc2VsZWN0JywgJHNlbGYpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYoJHNlbGYuaXMoJ2lucHV0W3R5cGU9XCJmaWxlXCJdJykpIHtcbiAgICAgICAgICAgIGlmKCRzZWxmLmlzKCdbbXVsdGlwbGVdJykpIHtcbiAgICAgICAgICAgICAgICBhZGRJbnB1dHNCYXNpYygnZmlsZVttdWx0aXBsZV0nLCAkc2VsZik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhZGRJbnB1dHNCYXNpYygnZmlsZScsICRzZWxmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKCRzZWxmLmlzKCdpbnB1dFt0eXBlPVwiaGlkZGVuXCJdJykpIHtcbiAgICAgICAgICAgIGFkZElucHV0c0Jhc2ljKCdoaWRkZW4nLCAkc2VsZik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZigkc2VsZi5pcygnaW5wdXRbdHlwZT1cInJhZGlvXCJdJykpIHtcbiAgICAgICAgICAgIGFkZElucHV0c0dyb3VwKCdyYWRpbycsICRzZWxmKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKCRzZWxmLmlzKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKSkge1xuICAgICAgICAgICAgYWRkSW5wdXRzR3JvdXAoJ2NoZWNrYm94JywgJHNlbGYpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy9pbiBhbGwgb3RoZXIgY2FzZXMgZGVmYXVsdCB0byBhIFwidGV4dFwiIGlucHV0IGludGVyZmFjZS5cbiAgICAgICAgICAgIGFkZElucHV0c0Jhc2ljKCd0ZXh0JywgJHNlbGYpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBhZGRJbnB1dHNCYXNpYygnYnV0dG9uJywgJ2lucHV0W3R5cGU9XCJidXR0b25cIl0sIGJ1dHRvbiwgaW5wdXRbdHlwZT1cInN1Ym1pdFwiXScpO1xuICAgICAgICBhZGRJbnB1dHNCYXNpYygndGV4dCcsICdpbnB1dFt0eXBlPVwidGV4dFwiXScpO1xuICAgICAgICBhZGRJbnB1dHNCYXNpYygncGFzc3dvcmQnLCAnaW5wdXRbdHlwZT1cInBhc3N3b3JkXCJdJyk7XG4gICAgICAgIGFkZElucHV0c0Jhc2ljKCdlbWFpbCcsICdpbnB1dFt0eXBlPVwiZW1haWxcIl0nKTtcbiAgICAgICAgYWRkSW5wdXRzQmFzaWMoJ3VybCcsICdpbnB1dFt0eXBlPVwidXJsXCJdJyk7XG4gICAgICAgIGFkZElucHV0c0Jhc2ljKCdyYW5nZScsICdpbnB1dFt0eXBlPVwicmFuZ2VcIl0nKTtcbiAgICAgICAgYWRkSW5wdXRzQmFzaWMoJ3RleHRhcmVhJywgJ3RleHRhcmVhJyk7XG4gICAgICAgIGFkZElucHV0c0Jhc2ljKCdzZWxlY3QnLCAnc2VsZWN0Om5vdChbbXVsdGlwbGVdKScpO1xuICAgICAgICBhZGRJbnB1dHNCYXNpYygnc2VsZWN0W211bHRpcGxlXScsICdzZWxlY3RbbXVsdGlwbGVdJyk7XG4gICAgICAgIGFkZElucHV0c0Jhc2ljKCdmaWxlJywgJ2lucHV0W3R5cGU9XCJmaWxlXCJdOm5vdChbbXVsdGlwbGVdKScpO1xuICAgICAgICBhZGRJbnB1dHNCYXNpYygnZmlsZVttdWx0aXBsZV0nLCAnaW5wdXRbdHlwZT1cImZpbGVcIl1bbXVsdGlwbGVdJyk7XG4gICAgICAgIGFkZElucHV0c0Jhc2ljKCdoaWRkZW4nLCAnaW5wdXRbdHlwZT1cImhpZGRlblwiXScpO1xuICAgICAgICBhZGRJbnB1dHNHcm91cCgncmFkaW8nLCAnaW5wdXRbdHlwZT1cInJhZGlvXCJdJyk7XG4gICAgICAgIGFkZElucHV0c0dyb3VwKCdjaGVja2JveCcsICdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gaW5wdXRzO1xufTtcblxuJC5mbi5pbnB1dFZhbCA9IGZ1bmN0aW9uIChuZXdWYWx1ZSkge1xuICAgIHZhciAkc2VsZiA9ICQodGhpcyk7XG5cbiAgICB2YXIgaW5wdXRzID0gYnVpbGRGb3JtSW5wdXRzKHsgJDogJHNlbGYgfSk7XG5cbiAgICBpZigkc2VsZi5pcygnaW5wdXQsIHRleHRhcmVhLCBzZWxlY3QnKSkge1xuICAgICAgICBpZih0eXBlb2YgbmV3VmFsdWUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5wdXRzWyRzZWxmLmF0dHIoJ25hbWUnKV0uZ2V0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpbnB1dHNbJHNlbGYuYXR0cignbmFtZScpXS5zZXQobmV3VmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuICRzZWxmO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZih0eXBlb2YgbmV3VmFsdWUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbChpbnB1dHMsICdnZXQnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvcmVhY2gobmV3VmFsdWUsIGZ1bmN0aW9uICh2YWx1ZSwgaW5wdXROYW1lKSB7XG4gICAgICAgICAgICAgICAgaW5wdXRzW2lucHV0TmFtZV0uc2V0KHZhbHVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuICRzZWxmO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuJC5mbi5pbnB1dE9uQ2hhbmdlID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgdmFyICRzZWxmID0gJCh0aGlzKTtcbiAgICB2YXIgaW5wdXRzID0gYnVpbGRGb3JtSW5wdXRzKHsgJDogJHNlbGYgfSk7XG4gICAgZm9yZWFjaChpbnB1dHMsIGZ1bmN0aW9uIChpbnB1dCkge1xuICAgICAgICBpbnB1dC5zdWJzY3JpYmUoJ2NoYW5nZScsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBjYWxsYmFjay5jYWxsKGRhdGEuZG9tRWxlbWVudCwgZGF0YS5lKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuICRzZWxmO1xufTtcblxuJC5mbi5pbnB1dERpc2FibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyICRzZWxmID0gJCh0aGlzKTtcbiAgICBjYWxsKGJ1aWxkRm9ybUlucHV0cyh7ICQ6ICRzZWxmIH0pLCAnZGlzYWJsZScpO1xuICAgIHJldHVybiAkc2VsZjtcbn07XG5cbiQuZm4uaW5wdXRFbmFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyICRzZWxmID0gJCh0aGlzKTtcbiAgICBjYWxsKGJ1aWxkRm9ybUlucHV0cyh7ICQ6ICRzZWxmIH0pLCAnZW5hYmxlJyk7XG4gICAgcmV0dXJuICRzZWxmO1xufTtcblxuJC5mbi5pbnB1dENsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciAkc2VsZiA9ICQodGhpcyk7XG4gICAgY2FsbChidWlsZEZvcm1JbnB1dHMoeyAkOiAkc2VsZiB9KSwgJ2NsZWFyJyk7XG4gICAgcmV0dXJuICRzZWxmO1xufTtcblxufShqUXVlcnkpKTtcblxuJC5mbi5yZXBlYXRlclZhbCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcGFyc2UgPSBmdW5jdGlvbiAocmF3KSB7XG4gICAgICAgIHZhciBwYXJzZWQgPSBbXTtcblxuICAgICAgICBmb3JlYWNoKHJhdywgZnVuY3Rpb24gKHZhbCwga2V5KSB7XG4gICAgICAgICAgICB2YXIgcGFyc2VkS2V5ID0gW107XG4gICAgICAgICAgICBpZihrZXkgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICBwYXJzZWRLZXkucHVzaChrZXkubWF0Y2goL15bXlxcW10qLylbMF0pO1xuICAgICAgICAgICAgICAgIHBhcnNlZEtleSA9IHBhcnNlZEtleS5jb25jYXQobWFwKFxuICAgICAgICAgICAgICAgICAgICBrZXkubWF0Y2goL1xcW1teXFxdXSpcXF0vZyksXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChicmFja2V0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBicmFja2V0ZWQucmVwbGFjZSgvW1xcW1xcXV0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKSk7XG5cbiAgICAgICAgICAgICAgICBwYXJzZWQucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHZhbDogdmFsLFxuICAgICAgICAgICAgICAgICAgICBrZXk6IHBhcnNlZEtleVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcGFyc2VkO1xuICAgIH07XG5cbiAgICB2YXIgYnVpbGQgPSBmdW5jdGlvbiAocGFyc2VkKSB7XG4gICAgICAgIGlmKFxuICAgICAgICAgICAgcGFyc2VkLmxlbmd0aCA9PT0gMSAmJlxuICAgICAgICAgICAgKHBhcnNlZFswXS5rZXkubGVuZ3RoID09PSAwIHx8IHBhcnNlZFswXS5rZXkubGVuZ3RoID09PSAxICYmICFwYXJzZWRbMF0ua2V5WzBdKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZWRbMF0udmFsO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yZWFjaChwYXJzZWQsIGZ1bmN0aW9uIChwKSB7XG4gICAgICAgICAgICBwLmhlYWQgPSBwLmtleS5zaGlmdCgpO1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgZ3JvdXBlZCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ3JvdXBlZCA9IHt9O1xuXG4gICAgICAgICAgICBmb3JlYWNoKHBhcnNlZCwgZnVuY3Rpb24gKHApIHtcbiAgICAgICAgICAgICAgICBpZighZ3JvdXBlZFtwLmhlYWRdKSB7XG4gICAgICAgICAgICAgICAgICAgIGdyb3VwZWRbcC5oZWFkXSA9IFtdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBncm91cGVkW3AuaGVhZF0ucHVzaChwKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gZ3JvdXBlZDtcbiAgICAgICAgfSgpKTtcblxuICAgICAgICB2YXIgYnVpbHQ7XG5cbiAgICAgICAgaWYoL15bMC05XSskLy50ZXN0KHBhcnNlZFswXS5oZWFkKSkge1xuICAgICAgICAgICAgYnVpbHQgPSBbXTtcbiAgICAgICAgICAgIGZvcmVhY2goZ3JvdXBlZCwgZnVuY3Rpb24gKGdyb3VwKSB7XG4gICAgICAgICAgICAgICAgYnVpbHQucHVzaChidWlsZChncm91cCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBidWlsdCA9IHt9O1xuICAgICAgICAgICAgZm9yZWFjaChncm91cGVkLCBmdW5jdGlvbiAoZ3JvdXAsIGtleSkge1xuICAgICAgICAgICAgICAgIGJ1aWx0W2tleV0gPSBidWlsZChncm91cCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBidWlsdDtcbiAgICB9O1xuXG4gICAgcmV0dXJuIGJ1aWxkKHBhcnNlKCQodGhpcykuaW5wdXRWYWwoKSkpO1xufTtcblxuJC5mbi5yZXBlYXRlciA9IGZ1bmN0aW9uIChmaWcpIHtcbiAgICBmaWcgPSBmaWcgfHwge307XG5cbiAgICB2YXIgc2V0TGlzdDtcblxuICAgICQodGhpcykuZWFjaChmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgdmFyICRzZWxmID0gJCh0aGlzKTtcblxuICAgICAgICB2YXIgc2hvdyA9IGZpZy5zaG93IHx8IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQodGhpcykuc2hvdygpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBoaWRlID0gZmlnLmhpZGUgfHwgZnVuY3Rpb24gKHJlbW92ZUVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJlbW92ZUVsZW1lbnQoKTtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgJGxpc3QgPSAkc2VsZi5maW5kKCdbZGF0YS1yZXBlYXRlci1saXN0XScpLmZpcnN0KCk7XG5cbiAgICAgICAgdmFyICRmaWx0ZXJOZXN0ZWQgPSBmdW5jdGlvbiAoJGl0ZW1zLCByZXBlYXRlcnMpIHtcbiAgICAgICAgICAgIHJldHVybiAkaXRlbXMuZmlsdGVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVwZWF0ZXJzID9cbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KFxuICAgICAgICAgICAgICAgICAgICAgICAgcGx1Y2socmVwZWF0ZXJzLCAnc2VsZWN0b3InKS5qb2luKCcsJylcbiAgICAgICAgICAgICAgICAgICAgKS5sZW5ndGggPT09IDAgOiB0cnVlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyICRpdGVtcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAkZmlsdGVyTmVzdGVkKCRsaXN0LmZpbmQoJ1tkYXRhLXJlcGVhdGVyLWl0ZW1dJyksIGZpZy5yZXBlYXRlcnMpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciAkaXRlbVRlbXBsYXRlID0gJGxpc3QuZmluZCgnW2RhdGEtcmVwZWF0ZXItaXRlbV0nKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpcnN0KCkuY2xvbmUoKS5oaWRlKCk7XG5cbiAgICAgICAgdmFyICRmaXJzdERlbGV0ZUJ1dHRvbiA9ICRmaWx0ZXJOZXN0ZWQoXG4gICAgICAgICAgICAkZmlsdGVyTmVzdGVkKCQodGhpcykuZmluZCgnW2RhdGEtcmVwZWF0ZXItaXRlbV0nKSwgZmlnLnJlcGVhdGVycylcbiAgICAgICAgICAgIC5maXJzdCgpLmZpbmQoJ1tkYXRhLXJlcGVhdGVyLWRlbGV0ZV0nKSxcbiAgICAgICAgICAgIGZpZy5yZXBlYXRlcnNcbiAgICAgICAgKTtcblxuICAgICAgICBpZihmaWcuaXNGaXJzdEl0ZW1VbmRlbGV0YWJsZSAmJiAkZmlyc3REZWxldGVCdXR0b24pIHtcbiAgICAgICAgICAgICRmaXJzdERlbGV0ZUJ1dHRvbi5yZW1vdmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBnZXRHcm91cE5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ3JvdXBOYW1lID0gJGxpc3QuZGF0YSgncmVwZWF0ZXItbGlzdCcpO1xuICAgICAgICAgICAgcmV0dXJuIGZpZy4kcGFyZW50ID9cbiAgICAgICAgICAgICAgICBmaWcuJHBhcmVudC5kYXRhKCdpdGVtLW5hbWUnKSArICdbJyArIGdyb3VwTmFtZSArICddJyA6XG4gICAgICAgICAgICAgICAgZ3JvdXBOYW1lO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBpbml0TmVzdGVkID0gZnVuY3Rpb24gKCRsaXN0SXRlbXMpIHtcbiAgICAgICAgICAgIGlmKGZpZy5yZXBlYXRlcnMpIHtcbiAgICAgICAgICAgICAgICAkbGlzdEl0ZW1zLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgJGl0ZW0gPSAkKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoKGZpZy5yZXBlYXRlcnMsIGZ1bmN0aW9uIChuZXN0ZWRGaWcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRpdGVtLmZpbmQobmVzdGVkRmlnLnNlbGVjdG9yKS5yZXBlYXRlcihleHRlbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmVzdGVkRmlnLCB7ICRwYXJlbnQ6ICRpdGVtIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICkpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgJGZvcmVhY2hSZXBlYXRlckluSXRlbSA9IGZ1bmN0aW9uIChyZXBlYXRlcnMsICRpdGVtLCBjYikge1xuICAgICAgICAgICAgaWYocmVwZWF0ZXJzKSB7XG4gICAgICAgICAgICAgICAgZm9yZWFjaChyZXBlYXRlcnMsIGZ1bmN0aW9uIChuZXN0ZWRGaWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY2IuY2FsbCgkaXRlbS5maW5kKG5lc3RlZEZpZy5zZWxlY3RvcilbMF0sIG5lc3RlZEZpZyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHNldEluZGV4ZXMgPSBmdW5jdGlvbiAoJGl0ZW1zLCBncm91cE5hbWUsIHJlcGVhdGVycykge1xuICAgICAgICAgICAgJGl0ZW1zLmVhY2goZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICAgICAgdmFyICRpdGVtID0gJCh0aGlzKTtcbiAgICAgICAgICAgICAgICAkaXRlbS5kYXRhKCdpdGVtLW5hbWUnLCBncm91cE5hbWUgKyAnWycgKyBpbmRleCArICddJyk7XG4gICAgICAgICAgICAgICAgJGZpbHRlck5lc3RlZCgkaXRlbS5maW5kKCdbbmFtZV0nKSwgcmVwZWF0ZXJzKVxuICAgICAgICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyICRpbnB1dCA9ICQodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIC8vIG1hdGNoIG5vbiBlbXB0eSBicmFja2V0cyAoZXg6IFwiW2Zvb11cIilcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoZXMgPSAkaW5wdXQuYXR0cignbmFtZScpLm1hdGNoKC9cXFtbXlxcXV0rXFxdL2cpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBuYW1lID0gbWF0Y2hlcyA/XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzdHJpcCBcIltcIiBhbmQgXCJdXCIgY2hhcmFjdGVyc1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdChtYXRjaGVzKS5yZXBsYWNlKC9cXFt8XFxdL2csICcnKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAkaW5wdXQuYXR0cignbmFtZScpO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld05hbWUgPSBncm91cE5hbWUgKyAnWycgKyBpbmRleCArICddWycgKyBuYW1lICsgJ10nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICgkaW5wdXQuaXMoJzpjaGVja2JveCcpIHx8ICRpbnB1dC5hdHRyKCdtdWx0aXBsZScpID8gJ1tdJyA6ICcnKTtcblxuICAgICAgICAgICAgICAgICAgICAkaW5wdXQuYXR0cignbmFtZScsIG5ld05hbWUpO1xuXG4gICAgICAgICAgICAgICAgICAgICRmb3JlYWNoUmVwZWF0ZXJJbkl0ZW0ocmVwZWF0ZXJzLCAkaXRlbSwgZnVuY3Rpb24gKG5lc3RlZEZpZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRyZXBlYXRlciA9ICQodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRJbmRleGVzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRmaWx0ZXJOZXN0ZWQoJHJlcGVhdGVyLmZpbmQoJ1tkYXRhLXJlcGVhdGVyLWl0ZW1dJyksIG5lc3RlZEZpZy5yZXBlYXRlcnMgfHwgW10pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwTmFtZSArICdbJyArIGluZGV4ICsgJ10nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnWycgKyAkcmVwZWF0ZXIuZmluZCgnW2RhdGEtcmVwZWF0ZXItbGlzdF0nKS5maXJzdCgpLmRhdGEoJ3JlcGVhdGVyLWxpc3QnKSArICddJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXN0ZWRGaWcucmVwZWF0ZXJzXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkbGlzdC5maW5kKCdpbnB1dFtuYW1lXVtjaGVja2VkXScpXG4gICAgICAgICAgICAgICAgLnJlbW92ZUF0dHIoJ2NoZWNrZWQnKVxuICAgICAgICAgICAgICAgIC5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgc2V0SW5kZXhlcygkaXRlbXMoKSwgZ2V0R3JvdXBOYW1lKCksIGZpZy5yZXBlYXRlcnMpO1xuICAgICAgICBpbml0TmVzdGVkKCRpdGVtcygpKTtcbiAgICAgICAgaWYoZmlnLmluaXRFbXB0eSkge1xuICAgICAgICAgICAgJGl0ZW1zKCkucmVtb3ZlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZihmaWcucmVhZHkpIHtcbiAgICAgICAgICAgIGZpZy5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgc2V0SW5kZXhlcygkaXRlbXMoKSwgZ2V0R3JvdXBOYW1lKCksIGZpZy5yZXBlYXRlcnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYXBwZW5kSXRlbSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc2V0SXRlbXNWYWx1ZXMgPSBmdW5jdGlvbiAoJGl0ZW0sIGRhdGEsIHJlcGVhdGVycykge1xuICAgICAgICAgICAgICAgIGlmKGRhdGEgfHwgZmlnLmRlZmF1bHRWYWx1ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlucHV0TmFtZXMgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgJGZpbHRlck5lc3RlZCgkaXRlbS5maW5kKCdbbmFtZV0nKSwgcmVwZWF0ZXJzKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSAkKHRoaXMpLmF0dHIoJ25hbWUnKS5tYXRjaCgvXFxbKFteXFxdXSopKFxcXXxcXF1cXFtcXF0pJC8pWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXROYW1lc1trZXldID0gJCh0aGlzKS5hdHRyKCduYW1lJyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICRpdGVtLmlucHV0VmFsKG1hcChcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcihkYXRhIHx8IGZpZy5kZWZhdWx0VmFsdWVzLCBmdW5jdGlvbiAodmFsLCBuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlucHV0TmFtZXNbbmFtZV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkZW50aXR5LFxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5wdXROYW1lc1tuYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgKSk7XG4gICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAkZm9yZWFjaFJlcGVhdGVySW5JdGVtKHJlcGVhdGVycywgJGl0ZW0sIGZ1bmN0aW9uIChuZXN0ZWRGaWcpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyICRyZXBlYXRlciA9ICQodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICRmaWx0ZXJOZXN0ZWQoXG4gICAgICAgICAgICAgICAgICAgICAgICAkcmVwZWF0ZXIuZmluZCgnW2RhdGEtcmVwZWF0ZXItaXRlbV0nKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5lc3RlZEZpZy5yZXBlYXRlcnNcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmllbGROYW1lID0gJHJlcGVhdGVyLmZpbmQoJ1tkYXRhLXJlcGVhdGVyLWxpc3RdJykuZGF0YSgncmVwZWF0ZXItbGlzdCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoZGF0YSAmJiBkYXRhW2ZpZWxkTmFtZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJHRlbXBsYXRlID0gJCh0aGlzKS5jbG9uZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyZXBlYXRlci5maW5kKCdbZGF0YS1yZXBlYXRlci1pdGVtXScpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2goZGF0YVtmaWVsZE5hbWVdLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGl0ZW0gPSAkdGVtcGxhdGUuY2xvbmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0SXRlbXNWYWx1ZXMoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaXRlbSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXN0ZWRGaWcucmVwZWF0ZXJzIHx8IFtdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyZXBlYXRlci5maW5kKCdbZGF0YS1yZXBlYXRlci1saXN0XScpLmFwcGVuZCgkaXRlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJdGVtc1ZhbHVlcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmVzdGVkRmlnLmRlZmF1bHRWYWx1ZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5lc3RlZEZpZy5yZXBlYXRlcnMgfHwgW11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgkaXRlbSwgZGF0YSkge1xuICAgICAgICAgICAgICAgICRsaXN0LmFwcGVuZCgkaXRlbSk7XG4gICAgICAgICAgICAgICAgc2V0SW5kZXhlcygkaXRlbXMoKSwgZ2V0R3JvdXBOYW1lKCksIGZpZy5yZXBlYXRlcnMpO1xuICAgICAgICAgICAgICAgICRpdGVtLmZpbmQoJ1tuYW1lXScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmlucHV0Q2xlYXIoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzZXRJdGVtc1ZhbHVlcygkaXRlbSwgZGF0YSB8fCBmaWcuZGVmYXVsdFZhbHVlcywgZmlnLnJlcGVhdGVycyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KCkpO1xuXG4gICAgICAgIHZhciBhZGRJdGVtID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHZhciAkaXRlbSA9ICRpdGVtVGVtcGxhdGUuY2xvbmUoKTtcbiAgICAgICAgICAgIGFwcGVuZEl0ZW0oJGl0ZW0sIGRhdGEpO1xuICAgICAgICAgICAgaWYoZmlnLnJlcGVhdGVycykge1xuICAgICAgICAgICAgICAgIGluaXROZXN0ZWQoJGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2hvdy5jYWxsKCRpdGVtLmdldCgwKSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgc2V0TGlzdCA9IGZ1bmN0aW9uIChyb3dzKSB7XG4gICAgICAgICAgICAkaXRlbXMoKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIGZvcmVhY2gocm93cywgYWRkSXRlbSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJGZpbHRlck5lc3RlZCgkc2VsZi5maW5kKCdbZGF0YS1yZXBlYXRlci1jcmVhdGVdJyksIGZpZy5yZXBlYXRlcnMpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGFkZEl0ZW0oKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJGxpc3Qub24oJ2NsaWNrJywgJ1tkYXRhLXJlcGVhdGVyLWRlbGV0ZV0nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9ICQodGhpcykuY2xvc2VzdCgnW2RhdGEtcmVwZWF0ZXItaXRlbV0nKS5nZXQoMCk7XG4gICAgICAgICAgICBoaWRlLmNhbGwoc2VsZiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICQoc2VsZikucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgc2V0SW5kZXhlcygkaXRlbXMoKSwgZ2V0R3JvdXBOYW1lKCksIGZpZy5yZXBlYXRlcnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGhpcy5zZXRMaXN0ID0gc2V0TGlzdDtcblxuICAgIHJldHVybiB0aGlzO1xufTtcblxufShqUXVlcnkpKTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/jquery.repeater/jquery.repeater.js\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	!function() {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = function(module) {
/******/ 			var getter = module && module.__esModule ?
/******/ 				function() { return module['default']; } :
/******/ 				function() { return module; };
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	!function() {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = function(exports, definition) {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	!function() {
/******/ 		__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	!function() {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = function(exports) {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	}();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./libs/jquery-repeater/jquery-repeater.js");
/******/ 	
/******/ 	return __webpack_exports__;
/******/ })()
;
});